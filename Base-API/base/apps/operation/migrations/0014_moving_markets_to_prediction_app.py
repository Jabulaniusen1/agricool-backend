# Generated by Django 3.2.4 on 2022-10-20 12:48

from django.db import migrations, models


def link_market(apps, schema_editor):
    market = apps.get_model("prediction", "Market")
    market_survey = apps.get_model("operation", "MarketSurvey")
    for survey in market_survey.objects.all():
        if survey.market is not None:
            entity, created = market.objects.get_or_create(name=survey.market.strip())
            survey.market_link = entity
            survey.save()


class Migration(migrations.Migration):

    dependencies = [
        ("operation", "0013_marketsurvey_market_link"),
    ]

    operations = [
        migrations.RunPython(link_market),
    ]
